# 1644 开局思潮设置脚本效果
# 使用方法：在 on_game_start 或其他事件中调用
# 例如：c:MNG = { give_all_early_institutions = yes }
# 注意：思潮进度达到100%后，国家会自动拥抱该思潮


give_traditions_institutions = {
	every_owned_location = {
		change_institution_progress = {
			type = institution:feudalism
			value = 100
		}
		change_institution_progress = {
			type = institution:legalism
			value = 100
		}
		change_institution_progress = {
			type = institution:meritocracy
			value = 100
		}
	}
}

give_renaissance_institutions = {
	every_owned_location = {
		change_institution_progress = {
			type = institution:renaissance
			value = 100
		}
		change_institution_progress = {
			type = institution:banking
			value = 100
		}
		change_institution_progress = {
			type = institution:professional_armies
			value = 100
		}
	}
}

give_discovery_institutions = {
	every_owned_location = {
		change_institution_progress = {
			type = institution:new_world
			value = 100
		}
		change_institution_progress = {
			type = institution:printing_press
			value = 100
		}
		change_institution_progress = {
			type = institution:pike_and_shot
			value = 100
		}
	}
}

give_reformation_institutions = {
	every_owned_location = {
		change_institution_progress = {
			type = institution:confessionalism
			value = 100
		}
		change_institution_progress = {
			type = institution:global_trade
			value = 100
		}
		change_institution_progress = {
			type = institution:artillery_institution
			value = 100
		}
	}
}
give_all_1644_institutions = {
	every_owned_location = {
		change_institution_progress = {
			type = institution:feudalism
			value = 100
		}
		change_institution_progress = {
			type = institution:legalism
			value = 100
		}
		change_institution_progress = {
			type = institution:meritocracy
			value = 100
		}
		change_institution_progress = {
			type = institution:renaissance
			value = 100
		}
		change_institution_progress = {
			type = institution:banking
			value = 100
		}
		change_institution_progress = {
			type = institution:professional_armies
			value = 100
		}
		change_institution_progress = {
			type = institution:new_world
			value = 100
		}
		change_institution_progress = {
			type = institution:printing_press
			value = 100
		}
		change_institution_progress = {
			type = institution:pike_and_shot
			value = 100
		}
		change_institution_progress = {
			type = institution:confessionalism
			value = 100
		}
		change_institution_progress = {
			type = institution:global_trade
			value = 100
		}
		change_institution_progress = {
			type = institution:artillery_institution
			value = 100
		}
	}
}

# 根据科技等级给予思潮
# 科技等级对应：
# 等级1 = Age 1 (Traditions) - feudalism, legalism, meritocracy
# 等级2 = Age 2 (Renaissance) - renaissance, banking, professional_armies
# 等级3 = Age 3 (Discovery) - new_world, printing_press, pike_and_shot
# 等级4 = Age 4 (Reformation) - confessionalism, global_trade, artillery_institution
give_institutions_by_tech_level = {
	if = {
		limit = { has_variable = start_tech_lv_1644 }
		
		# 等级1：Age 1 思潮
		if = {
			limit = { var:start_tech_lv_1644 >= 1 }
			give_traditions_institutions = yes
		}
		
		# 等级2：Age 2 思潮
		if = {
			limit = { var:start_tech_lv_1644 >= 2 }
			give_renaissance_institutions = yes
		}
		
		# 等级3：Age 3 思潮
		if = {
			limit = { var:start_tech_lv_1644 >= 3 }
			give_discovery_institutions = yes
		}
		
		# 等级4：Age 4 思潮
		if = {
			limit = { var:start_tech_lv_1644 >= 4 }
			give_reformation_institutions = yes
		}
	}
}